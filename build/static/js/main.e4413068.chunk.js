(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{107:function(t,e,c){"use strict";c.r(e);var a=c(0),n=c.n(a),r=c(31),s=c.n(r),i=(c(48),c(49),c(108)),o=c(4);function u(){return Object(o.jsxs)(i.a,{className:"login",children:[Object(o.jsx)("img",{src:"https://i1.sndcdn.com/avatars-000424488873-wzjyiy-t500x500.jpg",alt:"Mutiny Logo"}),Object(o.jsx)("a",{className:"btn btn-danger btn-lg",href:"https://accounts.spotify.com/authorize?client_id=6a82f3811baf470da9c2c103d4048892&response_type=code&redirect_uri=http://localhost:3001&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state",children:"Login To Mutiny"})]})}var l=c(7),j=c(8),d=c.n(j);function f(t){var e=t.track,c=t.chooseTrack;return Object(o.jsxs)("div",{className:"d-flex m-2 align-items-center",style:{cursor:"pointer"},onClick:function(){c(e)},children:[Object(o.jsx)("img",{src:e.albumUrl,alt:e.title,style:{height:"64px",width:"64px"}}),Object(o.jsxs)("div",{className:"ms-3",children:[Object(o.jsx)("div",{children:e.title}),Object(o.jsx)("div",{className:"text-muted",children:e.artist})]})]})}var b=c(41);function h(t){var e=t.accessToken,c=t.trackUri,n=Object(a.useState)(!1),r=Object(l.a)(n,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){return i(!0)}),[c]),e?Object(o.jsx)(b.a,{token:e,showSaveIcon:!0,callback:function(t){t.isPlaying||i(!1)},play:s,uris:c?[c]:[]}):null}var O=c(109),m=c(40),p=new(c.n(m).a)({clientId:"6a82f3811baf470da9c2c103d4048892"});function x(t){var e=function(t){var e=Object(a.useState)(),c=Object(l.a)(e,2),n=c[0],r=c[1],s=Object(a.useState)(),i=Object(l.a)(s,2),o=i[0],u=i[1],j=Object(a.useState)(),f=Object(l.a)(j,2),b=f[0],h=f[1];return Object(a.useEffect)((function(){d.a.post("http://localhost:3001/login",{code:t}).then((function(t){r(t.data.accessToken),u(t.data.refreshToken),h(t.data.expiresIn),window.history.pushState({},null,"/")})).catch((function(){window.location="/"}))}),[t]),Object(a.useEffect)((function(){if(o&&b){var t=setTimeout((function(){d.a.post("http://localhost:3001/refresh",{refreshToken:o}).then((function(t){r(t.data.accessToken),h(t.data.expiresIn)})).catch((function(){window.location="/"}))}),1e3*(b-60));return function(){return clearTimeout(t)}}}),[o,b]),n}(t.code),c=Object(a.useState)(""),n=Object(l.a)(c,2),r=n[0],s=n[1],u=Object(a.useState)([]),j=Object(l.a)(u,2),b=j[0],m=j[1],x=Object(a.useState)(),v=Object(l.a)(x,2),y=v[0],g=v[1],k=Object(a.useState)(""),w=Object(l.a)(k,2),S=w[0],T=w[1];function N(t){g(t),s(""),T("")}return Object(a.useEffect)((function(){y&&d.a.get("http://localhost:3001/lyrics",{params:{track:y.title,artist:y.artist}}).then((function(t){T(t.data.lyrics)}))}),[y]),Object(a.useEffect)((function(){e&&p.setAccessToken(e)}),[e]),Object(a.useEffect)((function(){if(!r)return m([]);if(e){var t=!1;return p.searchTracks(r).then((function(e){t||m(e.body.tracks.items.map((function(t){var e=t.album.images.reduce((function(t,e){return e.height<t.height?e:t}),t.album.images[0]);return{artist:t.artists[0].name,title:t.name,uri:t.uri,albumUrl:e.url}})))})),function(){return t=!0}}}),[r,e]),Object(o.jsxs)(i.a,{className:"d-flex flex-column py-2",style:{height:"100vh"},children:[Object(o.jsx)(O.a.Control,{type:"search",placeholder:"Search Songs/Artists",value:r,onChange:function(t){return s(t.target.value)}}),Object(o.jsxs)("div",{className:"flex-grow-1 my-2",style:{overflowY:"auto"},children:[b.map((function(t){return Object(o.jsx)(f,{track:t,chooseTrack:N},t.uri)})),0===b.length&&Object(o.jsx)("div",{className:"text-center",style:{whiteSpace:"pre"},children:S})]}),Object(o.jsx)("div",{children:Object(o.jsx)(h,{accessToken:e,trackUri:null===y||void 0===y?void 0:y.uri})})]})}var v=new URLSearchParams(window.location.search).get("code");var y=function(){return v?Object(o.jsx)(x,{code:v}):Object(o.jsx)(u,{})};s.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(y,{})}),document.getElementById("root"))},49:function(t,e,c){},87:function(t,e){}},[[107,1,2]]]);
//# sourceMappingURL=main.e4413068.chunk.js.map